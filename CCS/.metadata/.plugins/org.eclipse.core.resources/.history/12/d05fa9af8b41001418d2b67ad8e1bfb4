#include <msp430xG46x.h>
/*
 * main.c
 */

	//высокие частоты
	const int P1 = 27; //дл€ частоты 1209 √ц
	const int P2 = 24; //дл€ частоты 1336 √ц
	const int P3 = 22; //дл€ частоты 1477 √ц
	const int P4 = 20; //дл€ частоты 1633 √ц

	/*дл€ того что бы был 50% рабочий цикл*/
	const int D1 = 13;
	const int D2 = 12;
	const int D3 = 11;
	const int D4 = 10;

	//низкие частоты
	const int P5 = 47; //дл€ частоты 697 √ц
	const int P6 = 42; //дл€ частоты 770 √ц
	const int P7 = 38; //дл€ частоты 852 √ц
	const int P8 = 34; //дл€ частоты 941 √ц

	/*дл€ того что бы был 50% рабочий цикл*/
	const int D5 = 23;
	const int D6 = 21;
	const int D7 = 19;
	const int D8 = 17;


	//******************************************************************
	// Port1 Interrupt Service Rotine
	//******************************************************************
	#pragma vector=PORT1_VECTOR
	__interrupt void PORT1_ISR (void)
	{
	  if (P1IFG == 0x01)                        // SW1 interrupt
	  {											// change charg Pump Voltage
	   	if ((LCDAVCTL1 & 0x1E) > 0x1E) LCDAVCTL1 = 0;
	  	else LCDAVCTL1 +=0x02;
	  }

	  if (P1IFG == 0x02)                        // SW2 interrupt
	  {											// change LCD frequency
	   	if ((LCDACTL & 0xE0)== 0xE0) LCDACTL &= ~0xE0;
	  	else LCDACTL +=  0x20;
	  }

	  P1IFG = 0x00;	                             // clean all pending interrupts
	}

int main(void) {

	volatile unsigned int i;

    WDTCTL = WDTPW | WDTHOLD;	// Stop watchdog timer
    FLL_CTL0 |= XCAP14PF;       // Configure load caps
	
    // Wait for xtal to stabilize
    do
    {
    	IFG1 &= ~OFIFG;      // Clear OSCFault flag
    	for (i = 0x47FF; i > 0; i--);   // Time for flag to set
    }
    while ((IFG1 & OFIFG)); // OSCFault flag still set?

      /* SW1 and SW2 ports configuration
       * Ёто конфигураци€ кнопок. »спользуютс€ прерывани€
       */
      P1SEL &= ~0x03;                                       // P1.0 and P1.1 I/O ports
      P1DIR &= ~0x03;                                       // P1.0 and P1.1 digital inputs
      P1IFG = 0x00;                                         // clear all interrupts pending
      P1IE |= 0x03;                                         // enable port interrupts

    //конфигурируем пины
    //P1DIR |= 0x04; // P1.2 output
    //P1SEL |= 0x04; // P1.2 TA1 option


	return 0;
}
